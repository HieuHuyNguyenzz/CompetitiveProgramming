# DP trên cây

Đúng như tên gọi, Dp trên cây là áp dụng quy hoạch động trên các cấu trúc cây/ đồ thị. Áp dụng quy hoạch động trên cây giúp giảm độ phức tạp của các bài toán từ O($n^2$) của giải thuật ngây thơ xuống khoảng O(n).

Một số đặc điểm thường thấy của DP trên cây:
- Các trạng thái của bài toán thường tương ứng sẽ là các node trên cây
- Base case của bài toán là các node lá
- Các bài toán con được xây dựng dựa trên giải thuật BFS hoặc DFS

## Ví dụ cơ bản
![image](https://github.com/HieuHuyNguyenzz/CompetitiveProgramming/assets/135397654/08720ab7-0537-48d3-8deb-b7166940784e)

Tìm size của tất cả cây con trên cây trong O(n)

Cách giải: Giữ một mảng size[] để theo dõi size của mỗi cây con. size[i] là kích thước của cây con có gốc tại i. Khởi tạo size với giá trị là 1 vì đây là kích thước tối thiểu có thể của một cây con. Sau đó, sau khi DFS duyệt qua tất cả các cây con của một nút i, thêm các giá trị size của các con của i vào size[i].

Mã giả thuật toán:
```
array size[number of nodes] 1
Function DFS(i, parent):
  foreach j 2 adjacent[node] do
    if j 6= parent then
      DFS(j, node)
      size[i] size[i] + size[j]
    end
  end
End Function
```

## Kỹ thuật Rerooting

## Luyện tập
https://codeforces.com/gym/102346/problem/D

https://codeforces.com/contest/1528/problem/E

https://cses.fi/problemset/task/1130
